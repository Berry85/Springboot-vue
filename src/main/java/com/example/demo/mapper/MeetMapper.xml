<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
		"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace = "com.example.demo.mapper.MeetMapper">
	<resultMap id = "BaseResultMap" type = "com.example.demo.entity.Meet">
		<id column = "id" property = "id" jdbcType = "INTEGER"/>
		<result column = "tid" property = "tid" jdbcType = "INTEGER"/>
		<result column = "lid" property = "lid" jdbcType = "INTEGER"/>
		<result column = "address" property = "address" jdbcType = "VARCHAR"/>
		<result column = "time" property = "time" jdbcType = "DATE"/>
		<result column = "enable" property = "enable" jdbcType = "INTEGER"/>
	</resultMap>
	<!--	//	学生申请会面时间地点,地点为房屋地址，时间管理员定下来，-->
	<!--	int Applymeet(@Param("lid")Integer lid,@Param("tid")Integer tid);-->
	<insert id = "Applymeet">
		INSERT INTO meet
		SET tid=#{tid},lid=#{lid}
	</insert>
	<!--	//	管理员批准，-->
	<!--	int Apply(@Param("id")Integer id,@Param("address") String address, @Param("time") Date time);-->
	<update id = "Apply">
		UPDATE meet
		SET address=#{address},time=#{time},enable=1
		WHERE id=#{id}
	</update>

	<!--	//	学生查看申请结果-->
	<!--	List<Meet> getApplySource(Integer tid);-->
	<select id = "getApplySource" resultMap = "BaseResultMap">
		SELECT *
		FROM meet
		WHERE tid=#{tid} AND enable=1
	</select>

	<!--	//	学生申请查看正在审核的数据-->
	<!--	List<Meet> getApplying(Integer tid);-->
	<select id = "getApplying" resultMap = "BaseResultMap">
		SELECT *
		FROM meet
		WHERE tid=#{tid} AND enable=0
	</select>
	<!--	//房主查看已经申请通过后的会面时间地点-->
	<!--	List<Meet> getApplyLandlord(Integer lid);-->
	<select id = "getApplyLandlord" resultMap = "BaseResultMap">
		SELECT *
		FROM meet
		WHERE lid=#{lid} AND enable=1
	</select>
	<!--	//	管理员查看所有申请-->
	<!--	List<Meet> getAllApply(Integer enable);-->
	<select id = "getAllApply" resultMap = "BaseResultMap">
		SELECT *
		FROM meet
		WHERE enable=#{enable}
	</select>
</mapper>
